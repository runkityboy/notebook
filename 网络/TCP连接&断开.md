1. TCP三次握手
- 为什么还要第三次握手
> 客户端发起的请求可能丢包或者滞留导致超时，此时客户端会重新发起请求。  
> 如果是丢包那问题不大。如果是滞留导致超时，那么该包在某时刻还能到达服务端，  
> 服务端以为客户端再次发起请求，发出确认包并分配资源，但是客户端收到后认为  
> 不是自己发的而不处理。导致服务端资料浪费

2. TCP四次挥手
- 经过
  - 客户端发起(FIN)请求，表示自己不再发送数据了，进入终止等待状态1
  - 服务端收到请求后，发送确认报文，客户端收到后进入终止等待状态2，表示如果服务端还有数据没有发完，可以继续发
  - 服务端没有数据发了，发送FIN报文，ack=上一个确认报文ack
  - 客户端发送确认报文，进入等待时间(2个报文最大寿命时间), 服务端收到确认报文后释放资源

- 为什么要等待2个报文最大寿命时间
  - 第四次挥手报文可能丢失，如果客户端发出这个报文就关闭连接，那么用户收不到服务端重发的第三次挥手报文  
    导致服务端资料释放不了
  - 确保本次连接在网络上产生的报文都消失